\chapter{Related Work}\label{chap:relatedwork}
Selfish mining is a statistical attack. To analyze profitibality it is therefore beneficial to analytically model selfish mining. In order to study the impact of deviating mining strategies it is very important to represent the blockchain network as close to reality as possible in a mining model, to estimate realistic results. In the following recent selfish mining models as well as network models will be discussed.


\section{Selfish Mining Models}
Blockchain Mining is most commonly modelled through markov decision processes.
It is generally used to model decision making, where the outcomes are influenced by random processes and the decision of the decision maker~\cite{ibe2013markov}.
For the case of selfish mining the selfish miner chooses his next action, so he controls the decision making process. The rest of the network, the block arrival and block propagation can be modelled by stochastic processes. 

Utilizing a markovian model revenue gains can be analytically estimated. \citeauthor{eyal} first described a selfish mining model.
\citeauthor{eyal} used a Monte Carlo simulation to generate blocks and 1000 Miners operating at identical rates. Block propagation time is considered negligible compared to block generation time~\cite{eyal}. Therefore, communication is considered to be instantaneous. In the case of two branches of identical length, the miners are split up into factions mining on one of the two branches based on the network factor $\gamma$~\cite{eyal}. $\gamma$ resembles a fraction of the network receiving the selfish miner blocks before a simultaneously block sent from another miner.

\citeauthor{optimal_sm} further extended the model to consider all possible actions a selfish miner can perceive. Block propagation time remains unassessed, since it is again considered to be much smaller than block generation time. \citeauthor{optimal_sm} also use the same notion of $\gamma$ like \citeauthor{eyal}. \citeauthor{optimal_sm} model the whole process as a markov decision process.
This markovian model was widely used and adopted in other research directions studying other aspects of selfish mining.
\citeauthor{deepDiveSM} extended the model even further to analyze multiple selfish miners. This resulted in a more complex state space of the markov decision process.

\citeauthor{xiao_modeling} study the impact on the profitability threshhold and revenue gain of a networking advantage possessed by the selfish miner. They model the network as a graph and find that networking advantage correlates to the betweenness centrality of the selfish miner. Additionally it highly affects the profitability threshhold and revenue gain of the attacker. This indicates that the structure of the network influences the selfish mining strategy. However, this model remains very abstract, since only the peer-to-peer layer and structure is modelled as a graph, disregarding any limitations imposed by physical infrastructure such as bandwidth. Nonetheless, it indicates that the underlying network influences the blockchain overlay, strengthening the assumption that there is a highly influencial dependency between networking effects and selfish mining.

It is not contested by any of the previous research, that network capabilities and communication delay impact selfish mining~\cite{multi_sm}, although most research model block propagation as instantaneous.
Another factor is, that most research which is concerned with selfish mining, builts on top of the model presented by \citeauthor{optimal_sm}
Both factors contribute to the negligence of networking effects, when analyzing selfish mining.
Assuming that the underlying network does influence the system built on top, this master thesis aims to analyze the impact of networking effects on selfish mining. It is therefore important to represent the network in the model, which is used to analyze selfish mining.

\section{Blockchain Network Models}
Bitcoin and Proof-of-Work blockchains in general have been additionally modelled and analyzed from a networking perspective. In order to study selfish mining with the context of networking effects it is necessary to analyze the network. 
Most blockchain network models are concerned with the estimation of consistency. Consistency is the property of a blockchain that all honest parties output the same block sequence.
\citeauthor{garay2015bitcoin} study the core of the bitcoin protocol formally~\cite{garay2015bitcoin}. They analyze the protocol in a synchronous communication network and show persistence and liveness of committed transactions. \citeauthor{garay2015bitcoin} further proof that the adversarial computational power bound to reach Byzantine Agreement is $1/2$ of the network for a synchronized network. The adversarial bound decreases as the network drifts further away from synchronization~\cite{garay2015bitcoin}.
The Analysis of \citeauthor{garay2015bitcoin} indicate that the network highly influences the behavior of Proof-of-Work blockchains.

\citeauthor{pass2017analysis} propose a new network model to analyze blockchains in terms of consistency and liveness in an asynchronous network~\cite{pass2017analysis}. They do not make any assumptions of synchronicity and proof consistency in a network with with adversarial delays that are a-priori bounded. They show that the proof of work hardness needs to be set as a function of the maximum network delay. New peers joining the network or peers getting corrupted are also modelled. They proove that Nakamotos protocol satisfies consistency even in a network with message delays.

\citeauthor{kiffer2018better} built on top of the models of \citeauthor{garay2015bitcoin} and \citeauthor{pass2017analysis}, but formulate a simple markov chain based method to analyze consistency. Additionally they provide lower bounds for consistency. They also analyze the GHOST protocol, where consensus is built over the heaviest observed subtree, in addition to the longest chain rule~\cite{kiffer2018better}. The model is based on rounds of communication. The modelled adversary controls a fraction of honest peers and  can delay and reorder messages within a threshhold $\delta$. The model therefore captures network attacks from an adversary, but disregards other networking effects.

\citeauthor{gervais2016security} introduce a novel framework to analyse security and performance of blockchain~\cite{gervais2016security}. They model how network and consensus parameters influence stale block rate, block propagation times, throughput and security. Stale blocks are blocks which do not end up in the longest chain. Selfish mining is modelled as a markov decision process. The network layer is characterized by block size and the information propagation mechanism. \citeauthor{gervais2016security} simulate the system over a network consisting of point-to-point connections between peers. Those channels are defined by latency and bandwidth. Latency is set using global IP latency statistics. One major result is that an increasing block size increases block propagation time linearly and stale block rate exponentially. 

\citeauthor{gopalan} utilize rumor-spreading to implement a new stochastic network model for blockchain~\cite{gopalan}. They study stability and scalability of their model. Each peer communicates at a given rate his oldest blocks to his neighbors. Communication channels are also bandwidth limited. This setup introduces network delays to blocks, which depends on the instantaneous network congestion.
Unlike previous stochastic network models \citeauthor{gopalan} do not introduce delay based on sampling data, but rather on the communication behavior of peers. Since network congestion depends on the behavior of peers and selfish mining is a deviating behavior, the model introduced by \citeauthor{gopalan} will be used in the following to analyze selfish mining and networking effects.Â´

